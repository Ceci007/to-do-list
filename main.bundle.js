(()=>{"use strict";const e=document.querySelector("[data-tasks]"),t=document.querySelector("[data-new-task-form]"),l=document.querySelector("[data-new-task-input]"),n=document.querySelector("[data-clear-complete-tasks-button]");e.addEventListener("click",(e=>{if("input"===e.target.tagName.toLowerCase()){const t=f.find((e=>e.id===k));t.tasks.find((t=>t.id===e.target.id)).complete=e.target.checked,console.log("hello"),S(),y(t)}})),n.addEventListener("click",(e=>{const t=f.find((e=>e.id===k));t.tasks=t.tasks.filter((e=>!e.complete)),console.log("hello"),h()})),t.addEventListener("submit",(e=>{e.preventDefault();const t=l.value;if(console.log("hello"),null==t||""===t)return;const n=(o=t,{id:Date.now().toString(),name:o,complete:!1});var o;l.value=null,f.find((e=>e.id===k)).tasks.push(n),h()}));const o=document.querySelector("[data-new-list-form]"),a=document.querySelector("[data-new-list-input]"),s=document.querySelector("[data-delete-list-button]"),i=document.querySelector("[data-lists]");function c(e,t,l){this.id=t,this.name=e,this.tasks=l}i.addEventListener("click",(e=>{console.log("hello"),"li"===e.target.tagName.toLowerCase()&&(k=e.target.dataset.listId,h())})),s.addEventListener("click",(e=>{f=f.filter((e=>e.id!==k)),k=null,h()})),o.addEventListener("submit",(e=>{e.preventDefault();const t=a.value;if(console.log("hello"),null==t||""===t)return;const l=new c(t,Date.now().toString(),[]);console.log(l),a.value=null,f.push(l),h()}));const d=document.getElementById("task-template"),r=document.querySelector("[data-list-count]"),u=document.querySelector("[data-list-display-container]"),m=document.querySelector("[data-list-title]"),p="task.lists",g="task.selectedListId";let f=JSON.parse(localStorage.getItem(p))||[],k=localStorage.getItem(g);const h=()=>{S(),v()};function S(){localStorage.setItem(p,JSON.stringify(f)),localStorage.setItem(g,k)}const y=e=>{const t=e.tasks.filter((e=>!e.complete)).length,l=1===t?"task":"tasks";r.innerText=`${t} ${l} remaining`},v=()=>{q(i),f.forEach((e=>{const t=document.createElement("li");t.dataset.listId=e.id,t.classList.add("list-name"),t.innerText=e.name,e.id===k&&t.classList.add("active-list"),i.appendChild(t)}));const t=f.find((e=>e.id===k));null==k?u.style.display="none":(u.style.display="",m.innerText=t.name,y(t),q(e),(t=>{t.tasks.forEach((t=>{const l=document.importNode(d.content,!0),n=l.querySelector("input");n.id=t.id,n.checked=t.complete;const o=l.querySelector("label");o.htmlFor=t.id,o.append(t.name),e.appendChild(l)}))})(t))},q=e=>{for(;e.firstChild;)e.removeChild(e.firstChild)};v()})();