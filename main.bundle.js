(()=>{"use strict";const t=document.querySelector("[data-tasks]"),e=document.querySelector("[data-new-task-form]"),n=document.querySelector("[data-new-priority-input]"),l=document.querySelector("[data-new-task-input]"),i=document.querySelector("[data-clear-complete-tasks-button]");function o(t,e,n,l){this.id=e,this.name=t,this.complete=n,this.priority=l}t.addEventListener("click",(t=>{if("input"===t.target.tagName.toLowerCase()){const e=h.find((t=>t.id===k));e.tasks.find((e=>e.id===t.target.id)).complete=t.target.checked,console.log("hello"),v(),q(e)}})),i.addEventListener("click",(t=>{const e=h.find((t=>t.id===k));e.tasks=e.tasks.filter((t=>!t.complete)),console.log("hello"),S()})),e.addEventListener("submit",(t=>{t.preventDefault();const e=l.value,i=n.value;if(null==e||""===e)return;const s=new o(e,Date.now().toString(),!1,i);l.value=null,h.find((t=>t.id===k)).tasks.push(s),S()}));const s=document.querySelector("[data-new-list-form]"),a=document.querySelector("[data-new-list-input]"),r=document.querySelector("[data-delete-list-button]"),c=document.querySelector("[data-lists]");function d(t,e,n){this.id=e,this.name=t,this.tasks=n}c.addEventListener("click",(t=>{console.log("hello"),"li"===t.target.tagName.toLowerCase()&&(k=t.target.dataset.listId,S())})),r.addEventListener("click",(t=>{h=h.filter((t=>t.id!==k)),k=null,S()})),s.addEventListener("submit",(t=>{t.preventDefault();const e=a.value;if(console.log("hello"),null==e||""===e)return;const n=new d(e,Date.now().toString(),[]);console.log(n),a.value=null,h.push(n),S()}));const u=document.getElementById("task-template"),m=document.querySelector("[data-list-count]"),p=document.querySelector("[data-list-display-container]"),y=document.querySelector("[data-list-title]"),f="task.lists",g="task.selectedListId";let h=JSON.parse(localStorage.getItem(f))||[],k=localStorage.getItem(g);const S=()=>{v(),L()};function v(){localStorage.setItem(f,JSON.stringify(h)),localStorage.setItem(g,k)}const q=t=>{const e=t.tasks.filter((t=>!t.complete)).length,n=1===e?"task":"tasks";m.innerText=`${e} ${n} remaining`},L=()=>{w(c),h.forEach((t=>{const e=document.createElement("li");e.dataset.listId=t.id,e.classList.add("list-name"),e.innerText=t.name,t.id===k&&e.classList.add("active-list"),c.appendChild(e)}));const e=h.find((t=>t.id===k));null==k?p.style.display="none":(p.style.display="",y.innerText=e.name,q(e),w(t),(e=>{e.tasks.forEach((e=>{const n=document.importNode(u.content,!0),l=n.querySelector("input");l.id=e.id,l.checked=e.complete;const i=n.querySelector("label");1==e.priority?i.classList.add("priority-1"):2==e.priority?i.classList.add("priority-2"):3==e.priority&&i.classList.add("priority-3"),i.htmlFor=e.id,i.append(e.name),t.appendChild(n)}))})(e))},w=t=>{for(;t.firstChild;)t.removeChild(t.firstChild)};L()})();