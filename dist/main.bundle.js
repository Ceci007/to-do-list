(()=>{"use strict";const t=document.querySelector("[data-tasks]"),e=document.querySelector("[data-new-task-form]"),n=document.querySelector("[data-new-priority-input]"),a=document.querySelector("[data-new-dueDate]"),l=document.querySelector("[data-new-task-input]"),s=document.querySelector("[data-clear-complete-tasks-button]");function i(t,e,n,a,l){this.id=e,this.name=t,this.complete=n,this.priority=a,this.dueDate=l}t.addEventListener("click",(t=>{if("input"===t.target.tagName.toLowerCase()){const e=S.find((t=>t.id===k));e.tasks.find((e=>e.id===t.target.id)).complete=t.target.checked,console.log("hello"),q(),L(e)}})),s.addEventListener("click",(t=>{const e=S.find((t=>t.id===k));e.tasks=e.tasks.filter((t=>!t.complete)),console.log("hello"),v()})),e.addEventListener("submit",(t=>{t.preventDefault();const e=l.value,s=n.value,o=a.value;if(null==e||""===e)return;const d=new i(e,Date.now().toString(),!1,s,o);l.value=null,S.find((t=>t.id===k)).tasks.push(d),v()}));const o=document.querySelector("[data-new-list-form]"),d=document.querySelector("[data-new-list-input]"),r=document.querySelector("[data-delete-list-button]"),c=document.querySelector("[data-lists]");function u(t,e,n){this.id=e,this.name=t,this.tasks=n}c.addEventListener("click",(t=>{console.log("hello"),"li"===t.target.tagName.toLowerCase()&&(k=t.target.dataset.listId,v())})),r.addEventListener("click",(t=>{S=S.filter((t=>t.id!==k)),k=null,v()})),o.addEventListener("submit",(t=>{t.preventDefault();const e=d.value;if(console.log("hello"),null==e||""===e)return;const n=new u(e,Date.now().toString(),[]);console.log(n),d.value=null,S.push(n),v()}));const m=document.getElementById("task-template"),p=document.querySelector("[data-list-count]"),y=document.querySelector("[data-list-display-container]"),h=document.querySelector("[data-list-title]"),f="task.lists",g="task.selectedListId";let S=JSON.parse(localStorage.getItem(f))||[],k=localStorage.getItem(g);const v=()=>{q(),w()};function q(){localStorage.setItem(f,JSON.stringify(S)),localStorage.setItem(g,k)}const L=t=>{const e=t.tasks.filter((t=>!t.complete)).length,n=1===e?"task":"tasks";p.innerText=`${e} ${n} remaining`},w=()=>{E(c),S.forEach((t=>{const e=document.createElement("li");e.dataset.listId=t.id,e.classList.add("list-name"),e.innerText=t.name,t.id===k&&e.classList.add("active-list"),c.appendChild(e)}));const e=S.find((t=>t.id===k));null==k?y.style.display="none":(y.style.display="",h.innerText=e.name,L(e),E(t),(e=>{e.tasks.forEach((e=>{const n=document.importNode(m.content,!0),a=n.querySelector("input");a.id=e.id,a.checked=e.complete;const l=n.querySelector("label"),s=document.createElement("span");s.classList.add("small-text"),s.innerText=e.dueDate,1==e.priority?l.classList.add("priority-1"):2==e.priority?l.classList.add("priority-2"):3==e.priority&&l.classList.add("priority-3"),l.htmlFor=e.id,l.append(e.name),l.appendChild(s),t.appendChild(n)}))})(e))},E=t=>{for(;t.firstChild;)t.removeChild(t.firstChild)};w()})();