(()=>{"use strict";const t=document.querySelector("[data-tasks]"),e=document.querySelector("[data-new-task-form]"),a=document.querySelector("[data-new-priority-input]"),n=document.querySelector("[data-new-dueDate]"),i=document.querySelector("[data-new-task-input]"),s=document.querySelector("[data-clear-complete-tasks-button]");function l(t,e,a,n,i){this.id=e,this.name=t,this.complete=a,this.priority=n,this.dueDate=i}t.addEventListener("click",(t=>{if("input"===t.target.tagName.toLowerCase()){const e=k.find((t=>t.id===g));e.tasks.find((e=>e.id===t.target.id)).complete=t.target.checked,v(),L(e)}})),s.addEventListener("click",(()=>{const t=k.find((t=>t.id===g));t.tasks=t.tasks.filter((t=>!t.complete)),E()})),e.addEventListener("submit",(t=>{t.preventDefault();const e=i.value,s=a.value,d=n.value;if(null==e||""===e)return;const r=new l(e,Date.now().toString(),!1,s,d);i.value=null,k.find((t=>t.id===g)).tasks.push(r),E()}));const d=document.querySelector("[data-new-list-form]"),r=document.querySelector("[data-new-list-input]"),o=document.querySelector("[data-delete-list-button]"),c=document.querySelector("[data-lists]");function u(t,e,a){this.id=e,this.name=t,this.tasks=a}c.addEventListener("click",(t=>{"li"===t.target.tagName.toLowerCase()&&(g=t.target.dataset.listId,E())})),o.addEventListener("click",(()=>{k=k.filter((t=>t.id!==g)),g=null,E()})),d.addEventListener("submit",(t=>{t.preventDefault();const e=r.value;if(null==e||""===e)return;const a=new u(e,Date.now().toString(),[]);r.value=null,k.push(a),E()}));const m=document.getElementById("task-template"),p=document.querySelector("[data-list-count]"),y=document.querySelector("[data-list-display-container]"),f=document.querySelector("[data-list-title]"),S="task.lists",h="task.selectedListId";let k=JSON.parse(localStorage.getItem(S))||[],g=localStorage.getItem(h);function v(){localStorage.setItem(S,JSON.stringify(k)),localStorage.setItem(h,g)}const q=t=>{for(;t.firstChild;)t.removeChild(t.firstChild)},L=t=>{const e=t.tasks.filter((t=>!t.complete)).length,a=1===e?"task":"tasks";p.innerText=`${e} ${a} remaining`},w=()=>{q(c),k.forEach((t=>{const e=document.createElement("li");e.dataset.listId=t.id,e.classList.add("list-name"),e.innerText=t.name,t.id===g&&e.classList.add("active-list"),c.appendChild(e)}));const e=k.find((t=>t.id===g));null==g?y.style.display="none":(y.style.display="",f.innerText=e.name,L(e),q(t),(e=>{e.tasks.forEach((e=>{const a=document.importNode(m.content,!0),n=a.querySelector("input");n.id=e.id,n.checked=e.complete;const i=a.querySelector("label"),s=document.createElement("span");s.classList.add("small-text"),s.innerText=e.dueDate,"1"===e.priority?i.classList.add("priority-1"):"2"===e.priority?i.classList.add("priority-2"):"3"===e.priority&&i.classList.add("priority-3"),i.htmlFor=e.id,i.append(e.name),i.appendChild(s),t.appendChild(a)}))})(e))},E=()=>{v(),w()};w()})();