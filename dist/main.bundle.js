(()=>{"use strict";var t=document.querySelector("[data-tasks]"),e=document.querySelector("[data-new-task-form]"),n=document.querySelector("[data-new-priority-input]"),a=document.querySelector("[data-new-dueDate]"),i=document.querySelector("[data-new-task-input]"),d=document.querySelector("[data-clear-complete-tasks-button]");function r(t,e,n,a,i){this.id=e,this.name=t,this.complete=n,this.priority=a,this.dueDate=i}document.addEventListener("DOMContentLoaded",(function(){t.addEventListener("click",(function(t){if("input"===t.target.tagName.toLowerCase()){var e=S.find((function(t){return t.id===h}));e.tasks.find((function(e){return e.id===t.target.id})).complete=t.target.checked,k(),E(e)}}))})),document.addEventListener("DOMContentLoaded",(function(){d.addEventListener("click",(function(){var t=S.find((function(t){return t.id===h}));t.tasks=t.tasks.filter((function(t){return!t.complete})),C()}))})),document.addEventListener("DOMContentLoaded",(function(){e.addEventListener("submit",(function(t){t.preventDefault();var e=i.value,d=n.value,o=a.value;if(null!=e&&""!==e){var c=new r(e,Date.now().toString(),!1,d,o);i.value=null,S.find((function(t){return t.id===h})).tasks.push(c),C()}}))}));var o=document.querySelector("[data-lists]"),c=document.querySelector("[data-new-list-form]"),u=document.querySelector("[data-new-list-input]"),s=document.querySelector("[data-delete-list-button]");function l(t,e,n){this.id=e,this.name=t,this.tasks=n}document.addEventListener("DOMContentLoaded",(function(){o.addEventListener("click",(function(t){"li"===t.target.tagName.toLowerCase()&&(h=t.target.dataset.listId,C())}))})),document.addEventListener("DOMContentLoaded",(function(){s.addEventListener("click",(function(){S=S.filter((function(t){return t.id!==h})),h=null,C()}))})),document.addEventListener("DOMContentLoaded",(function(){c.addEventListener("submit",(function(t){t.preventDefault();var e=u.value;if(null!=e&&""!==e){var n=new l(e,Date.now().toString(),[]);u.value=null,S.push(n),C()}}))}));var m=document.getElementById("task-template"),f=document.querySelector("[data-list-count]"),p=document.querySelector("[data-list-display-container]"),v=document.querySelector("[data-list-title]"),y="task.lists",L="task.selectedListId",S=JSON.parse(localStorage.getItem(y))||[],h=localStorage.getItem(L);function k(){localStorage.setItem(y,JSON.stringify(S)),localStorage.setItem(L,h)}var g=function(t){for(;t.firstChild;)t.removeChild(t.firstChild)},E=function(t){var e=t.tasks.filter((function(t){return!t.complete})).length,n=1===e?"task":"tasks";f.innerText="".concat(e," ").concat(n," remaining")},q=function(){g(o),S.forEach((function(t){var e=document.createElement("li");e.dataset.listId=t.id,e.classList.add("list-name"),e.innerText=t.name,t.id===h&&e.classList.add("active-list"),o.appendChild(e)}));var e=S.find((function(t){return t.id===h}));null==h?p.style.display="none":(p.style.display="",v.innerText=e.name,E(e),g(t),function(e){e.tasks.forEach((function(e){var n=document.importNode(m.content,!0),a=n.querySelector("input");a.id=e.id,a.checked=e.complete;var i=n.querySelector("label"),d=document.createElement("span");d.classList.add("small-text"),d.innerText=e.dueDate,"1"===e.priority?i.classList.add("priority-1"):"2"===e.priority?i.classList.add("priority-2"):"3"===e.priority&&i.classList.add("priority-3"),i.htmlFor=e.id,i.append(e.name),i.appendChild(d),t.appendChild(n)}))}(e))},C=function(){k(),q()};q()})();